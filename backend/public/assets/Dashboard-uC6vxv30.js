import{c as P,b as L,a as R,r as a,j as e,B as D,C as E}from"./index-_yXYEqcL.js";import{N as M}from"./navigation-CIqCX6Su.js";import{F as A}from"./footer-BQtg2-cU.js";import{C as j}from"./credit-card-BzWzjUVE.js";import{L as F}from"./log-out-CvuSphzZ.js";import{C as f}from"./calendar-NWhThMGY.js";import{G as I}from"./gift-xaN3R6ak.js";import{U as T}from"./user-Ai5-1aUm.js";import{C as u}from"./clock-xh9IAeUk.js";import{S as B}from"./star-nlKRpWv2.js";import{A as H}from"./award-CWNTBZ19.js";import{C as r}from"./circle-check-DHSvjqNQ.js";import{C as _}from"./circle-x-CE1ZE8zE.js";import"./shopping-bag-CEo4UOGG.js";import"./phone-DqBiH1an.js";import"./car-DasvkYGK.js";import"./instagram-HBzeWPol.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=P("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);function ie(){const[,d]=L(),{toast:w}=R(),[l,N]=a.useState("rdv"),[t,g]=a.useState(null),[c,v]=a.useState([]),[m,y]=a.useState([]),[k,C]=a.useState(!0),n=localStorage.getItem("client_token");a.useEffect(()=>{if(!n){d("/mon-compte/connexion");return}S()},[n]);const S=async()=>{try{const s={Authorization:`Bearer ${n}`},o=await fetch("/api/client/profile",{headers:s});if(o.ok){const i=await o.json();g(i.client)}const b=await fetch("/api/client/reservations/upcoming",{headers:s});if(b.ok){const i=await b.json();v(i.reservations||[])}const p=await fetch("/api/client/reservations/history",{headers:s});if(p.ok){const i=await p.json();y(i.reservations||[])}}catch(s){console.error("Erreur chargement donn√©es:",s)}finally{C(!1)}},z=()=>{localStorage.removeItem("client_token"),localStorage.removeItem("client_refresh_token"),localStorage.removeItem("client_user"),w({title:"D√©connexion r√©ussie"}),d("/")},x=s=>new Date(s).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}),h=s=>{switch(s){case"confirme":return e.jsxs("span",{className:"flex items-center gap-1 text-emerald-400 text-xs",children:[e.jsx(r,{className:"h-3 w-3"})," Confirm√©"]});case"demande":return e.jsxs("span",{className:"flex items-center gap-1 text-amber-400 text-xs",children:[e.jsx(E,{className:"h-3 w-3"})," En attente"]});case"termine":return e.jsxs("span",{className:"flex items-center gap-1 text-white/60 text-xs",children:[e.jsx(r,{className:"h-3 w-3"})," Termin√©"]});case"annule":return e.jsxs("span",{className:"flex items-center gap-1 text-red-400 text-xs",children:[e.jsx(_,{className:"h-3 w-3"})," Annul√©"]});default:return null}};return k?e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 border-2 border-amber-500/30 border-t-amber-500 rounded-full animate-spin"})}):e.jsxs("div",{className:"min-h-screen bg-zinc-950",children:[e.jsx(M,{}),e.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 african-pattern opacity-5"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-amber-500/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 left-0 w-80 h-80 bg-orange-500/10 rounded-full blur-3xl"})]}),e.jsx("div",{className:"fixed top-0 left-0 right-0 h-4 bg-black z-30"}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 h-4 bg-black z-30"}),e.jsx("div",{className:"fixed top-8 left-6 w-12 h-12 border-l-2 border-t-2 border-amber-500/30 z-20 pointer-events-none"}),e.jsx("div",{className:"fixed top-8 right-6 w-12 h-12 border-r-2 border-t-2 border-amber-500/30 z-20 pointer-events-none"}),e.jsx("div",{className:"fixed bottom-8 left-6 w-12 h-12 border-l-2 border-b-2 border-amber-500/30 z-20 pointer-events-none"}),e.jsx("div",{className:"fixed bottom-8 right-6 w-12 h-12 border-r-2 border-b-2 border-amber-500/30 z-20 pointer-events-none"}),e.jsxs("main",{className:"relative z-10 max-w-4xl mx-auto px-4 pt-24 pb-16",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-500/20 backdrop-blur-sm rounded-full border border-amber-500/30 mb-4",children:[e.jsx(j,{className:"h-4 w-4 text-amber-400"}),e.jsx("span",{className:"text-amber-300 text-sm font-medium",children:"Espace Fid√©lit√©"})]}),e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold mb-1",children:[e.jsx("span",{className:"text-white",children:"Bonjour, "}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-orange-500",children:t?.prenom||t?.nom}),e.jsx("span",{className:"text-white",children:" !"})]}),e.jsx("p",{className:"text-white/60",children:"G√©rez vos rendez-vous et vos avantages fid√©lit√©"})]}),e.jsxs(D,{variant:"outline",onClick:z,className:"border-amber-500/30 bg-white/5 text-white hover:bg-amber-500/20 hover:border-amber-500/50 transition-all",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"D√©connexion"]})]}),e.jsxs("div",{className:"relative bg-gradient-to-br from-amber-500 via-amber-600 to-orange-600 rounded-3xl p-6 md:p-8 mb-8 overflow-hidden shadow-2xl shadow-amber-500/20",children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2"}),e.jsx("div",{className:"absolute inset-0 african-pattern opacity-10"}),e.jsx("div",{className:"absolute top-4 left-4 w-8 h-8 border-l-2 border-t-2 border-white/30 rounded-tl-lg"}),e.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 border-r-2 border-t-2 border-white/30 rounded-tr-lg"}),e.jsx("div",{className:"absolute bottom-4 left-4 w-8 h-8 border-l-2 border-b-2 border-white/30 rounded-bl-lg"}),e.jsx("div",{className:"absolute bottom-4 right-4 w-8 h-8 border-r-2 border-b-2 border-white/30 rounded-br-lg"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(j,{className:"h-5 w-5 text-white"})}),e.jsx("span",{className:"text-white font-semibold",children:"Carte Fid√©lit√©"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üë©üèæ‚Äçü¶±"}),e.jsx("span",{className:"text-white/80 text-sm font-medium",children:"Fat's Hair-Afro"})]})]}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-6xl md:text-7xl font-bold text-white mb-2 drop-shadow-lg",children:t?.loyaltyPoints||0}),e.jsx("p",{className:"text-white/90 text-sm font-medium",children:"points disponibles"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white/70 text-xs uppercase tracking-wider mb-1",children:"Membre depuis"}),e.jsx("p",{className:"text-white font-semibold text-lg",children:t?.memberSince?new Date(t.memberSince).toLocaleDateString("fr-FR",{month:"long",year:"numeric"}):"-"})]})]})]})]}),e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide",children:[{id:"rdv",label:"Mes RDV",icon:f},{id:"fidelite",label:"Fid√©lit√©",icon:I},{id:"profil",label:"Mon Profil",icon:T}].map(s=>e.jsxs("button",{onClick:()=>N(s.id),className:`flex items-center gap-2 px-5 py-3 rounded-xl font-medium transition-all whitespace-nowrap ${l===s.id?"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-lg shadow-amber-500/30":"bg-white/5 text-white/60 hover:bg-white/10 hover:text-white border border-white/10"}`,children:[e.jsx(s.icon,{className:"h-4 w-4"}),s.label]},s.id))}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6",children:[l==="rdv"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-white font-semibold mb-4 flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-amber-400"}),"√Ä venir"]}),c.length===0?e.jsx("p",{className:"text-white/50 text-center py-8",children:"Aucun rendez-vous √† venir"}):e.jsx("div",{className:"space-y-3",children:c.map(s=>e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-white font-medium",children:s.service}),h(s.statut)]}),e.jsxs("div",{className:"flex items-center gap-4 text-white/60 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-4 w-4"}),x(s.date)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(u,{className:"h-4 w-4"}),s.heure]})]})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-white font-semibold mb-4 flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-amber-400"}),"Historique"]}),m.length===0?e.jsx("p",{className:"text-white/50 text-center py-8",children:"Aucun rendez-vous pass√©"}):e.jsx("div",{className:"space-y-3",children:m.slice(0,5).map(s=>e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-white font-medium",children:s.service}),s.pointsEarned>0&&e.jsxs("span",{className:"text-amber-400 text-xs flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3 fill-amber-400"}),"+",s.pointsEarned," pts"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-white/60 text-sm",children:[e.jsx("span",{children:x(s.date)}),h(s.statut)]})]},s.id))})]})]}),l==="fidelite"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-white font-semibold mb-4 flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-amber-400"}),"Vos avantages cumul√©s"]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/20 to-orange-500/20 rounded-2xl p-6 border border-amber-500/30",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-4xl font-bold text-white",children:[Math.floor((t?.loyaltyPoints||0)/400)*10,"‚Ç¨"]}),e.jsx("p",{className:"text-white/60 text-sm mt-1",children:"de r√©duction"}),e.jsxs("p",{className:"text-amber-400/80 text-xs mt-2",children:["(",Math.floor((t?.loyaltyPoints||0)/400)," x 10‚Ç¨)"]})]}),e.jsxs("div",{className:"text-center border-l border-white/10 pl-6",children:[e.jsxs("p",{className:"text-4xl font-bold text-white",children:[Math.floor((t?.loyaltyPoints||0)/1e3)*10,"%"]}),e.jsx("p",{className:"text-white/60 text-sm mt-1",children:"de r√©duction"}),e.jsxs("p",{className:"text-amber-400/80 text-xs mt-2",children:["(",Math.floor((t?.loyaltyPoints||0)/1e3)," x 10%)"]})]})]}),e.jsx("p",{className:"text-center text-white/50 text-sm mt-4 pt-4 border-t border-white/10",children:"Utilisables sur votre prochaine prestation"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[e.jsx("p",{className:"text-white/50 text-sm mb-2",children:"Prochain 10‚Ç¨"}),e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full bg-amber-500 rounded-full transition-all",style:{width:`${(t?.loyaltyPoints||0)%400/400*100}%`}})}),e.jsxs("p",{className:"text-amber-400 text-xs",children:[(t?.loyaltyPoints||0)%400," / 400 pts"]})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[e.jsx("p",{className:"text-white/50 text-sm mb-2",children:"Prochain 10%"}),e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full bg-orange-500 rounded-full transition-all",style:{width:`${(t?.loyaltyPoints||0)%1e3/1e3*100}%`}})}),e.jsxs("p",{className:"text-orange-400 text-xs",children:[(t?.loyaltyPoints||0)%1e3," / 1000 pts"]})]})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[e.jsx("h4",{className:"text-white font-medium mb-3",children:"Comment √ßa marche ?"}),e.jsxs("ul",{className:"space-y-2 text-white/60 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-4 w-4 text-amber-400 shrink-0"}),"1 point gagn√© pour chaque euro d√©pens√©"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-4 w-4 text-amber-400 shrink-0"}),"+10‚Ç¨ de r√©duction tous les 400 points (cumulables)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-4 w-4 text-amber-400 shrink-0"}),"+10% de r√©duction tous les 1000 points (cumulables)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-4 w-4 text-amber-400 shrink-0"}),"50 points offerts √† l'inscription"]})]})]})]}),l==="profil"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[e.jsx("p",{className:"text-white/50 text-sm mb-1",children:"Nom complet"}),e.jsxs("p",{className:"text-white font-medium",children:[t?.prenom," ",t?.nom]})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[e.jsx("p",{className:"text-white/50 text-sm mb-1",children:"Email"}),e.jsx("p",{className:"text-white font-medium",children:t?.email}),!t?.emailVerified&&e.jsx("p",{className:"text-amber-400 text-xs mt-1",children:"Email non v√©rifi√©"})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[e.jsx("p",{className:"text-white/50 text-sm mb-1",children:"T√©l√©phone"}),e.jsx("p",{className:"text-white font-medium",children:t?.telephone})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[e.jsx("p",{className:"text-white/50 text-sm mb-1",children:"Total d√©pens√©"}),e.jsxs("p",{className:"text-white font-medium",children:[((t?.totalSpent||0)/100).toFixed(2)," ‚Ç¨"]})]})]})})]})]}),e.jsx(A,{})]})}export{ie as default};
