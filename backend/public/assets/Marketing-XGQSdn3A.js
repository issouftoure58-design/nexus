import{r as l,j as e,S as F,X as $,L as D}from"./index-_yXYEqcL.js";import{A as G,M as L,b as q,T as B}from"./AdminLayout-CTeGiCEF.js";import{P as O}from"./plus-D6ktc07k.js";import{C as R}from"./check-B1pij6wq.js";import{C as U}from"./clock-xh9IAeUk.js";import{I as f}from"./image-nfPd-l1I.js";import{M as j}from"./mail-N-gOIhL7.js";import{C as w}from"./chart-column-eauyrf0D.js";import{C as J}from"./calendar-NWhThMGY.js";import{P as X}from"./pen-H50PqqQV.js";import{T as H}from"./trash-2-CXbRkBbN.js";import{S as N}from"./sparkles-BX8nnFHk.js";import{I as v,F as y}from"./instagram-HBzeWPol.js";import{M as K}from"./message-square-BHRNNhOm.js";import"./file-text-DGGLtmm2.js";import"./settings-BkyowQvs.js";import"./user-Ai5-1aUm.js";import"./scissors-DPHsfmq1.js";import"./users-DLPfMp13.js";import"./shopping-bag-CEo4UOGG.js";import"./chevron-right-DPdOXaL5.js";import"./log-out-CvuSphzZ.js";function ge(){const[c,k]=l.useState("posts"),[d,C]=l.useState([]),[x,S]=l.useState([]),[i,P]=l.useState(null),[z,u]=l.useState(!0),[_,n]=l.useState(!1),[p,b]=l.useState(!1),[r,m]=l.useState({platform:"instagram",occasion:"promo",tone:"professionnel",details:""});l.useEffect(()=>{h()},[]);const h=async()=>{u(!0);const s={Authorization:`Bearer ${localStorage.getItem("admin_token")}`};try{const[a,I,M]=await Promise.all([fetch("/api/admin/social/posts",{headers:s}).then(o=>o.json()).catch(()=>({posts:[]})),fetch("/api/admin/marketing/campaigns",{headers:s}).then(o=>o.json()).catch(()=>({campaigns:[]})),fetch("/api/admin/marketing/stats/overview",{headers:s}).then(o=>o.json()).catch(()=>null)]);C(a.posts||[]),S(I.campaigns||[]),P(M)}catch(a){console.error("Erreur chargement marketing:",a)}finally{u(!1)}},T=async()=>{b(!0);const t=localStorage.getItem("admin_token");try{(await(await fetch("/api/admin/social/ai/generate-promo-post",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(r)})).json()).success&&(n(!1),h())}catch(s){console.error("Erreur g√©n√©ration:",s)}finally{b(!1)}},A=async t=>{if(!confirm("Supprimer ce post ?"))return;const s=localStorage.getItem("admin_token");try{await fetch(`/api/admin/social/posts/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}}),h()}catch(a){console.error("Erreur suppression:",a)}},g=t=>{const s={draft:"bg-gray-500/20 text-gray-400",scheduled:"bg-blue-500/20 text-blue-400",published:"bg-green-500/20 text-green-400",failed:"bg-red-500/20 text-red-400",active:"bg-green-500/20 text-green-400",paused:"bg-amber-500/20 text-amber-400",completed:"bg-purple-500/20 text-purple-400"},a={draft:"Brouillon",scheduled:"Programm√©",published:"Publi√©",failed:"√âchec",active:"Active",paused:"En pause",completed:"Termin√©e"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s[t]||s.draft}`,children:a[t]||t})},E=t=>t==="instagram"?e.jsx(v,{className:"w-5 h-5 text-pink-500"}):t==="facebook"?e.jsx(y,{className:"w-5 h-5 text-blue-500"}):e.jsx(K,{className:"w-5 h-5 text-white/50"});return e.jsxs(G,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(L,{className:"w-7 h-7 text-amber-400"}),"Marketing"]}),e.jsx("p",{className:"text-white/50 text-sm",children:"G√©rez vos publications et campagnes"})]}),e.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl font-medium shadow-lg shadow-amber-500/30 hover:shadow-amber-500/50 transition-all",children:[e.jsx(O,{className:"w-5 h-5"}),"Nouveau post IA"]})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Posts publi√©s",value:i?.posts_published||d.filter(t=>t.status==="published").length,icon:R,color:"from-green-500 to-emerald-600"},{label:"Programm√©s",value:i?.posts_scheduled||d.filter(t=>t.status==="scheduled").length,icon:U,color:"from-blue-500 to-cyan-600"},{label:"Campagnes actives",value:i?.campaigns_active||x.filter(t=>t.status==="active").length,icon:q,color:"from-purple-500 to-violet-600"},{label:"Taux d'engagement",value:i?.engagement_rate?`${i.engagement_rate}%`:"‚Äî",icon:B,color:"from-amber-500 to-orange-600"}].map((t,s)=>e.jsxs("div",{className:"bg-zinc-900/80 border border-white/10 rounded-2xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-white/50 text-sm",children:t.label}),e.jsx("div",{className:`w-10 h-10 bg-gradient-to-br ${t.color} rounded-xl flex items-center justify-center shadow-lg`,children:e.jsx(t.icon,{className:"w-5 h-5 text-white"})})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.value})]},s))}),e.jsx("div",{className:"flex gap-1 bg-zinc-900/50 p-1 rounded-xl w-fit",children:[{id:"posts",label:"Publications",icon:f},{id:"campaigns",label:"Campagnes",icon:j},{id:"stats",label:"Statistiques",icon:w}].map(t=>e.jsxs("button",{onClick:()=>k(t.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${c===t.id?"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-lg":"text-white/60 hover:text-white hover:bg-white/10"}`,children:[e.jsx(t.icon,{className:"w-4 h-4"}),t.label]},t.id))}),z?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"})}):e.jsxs(e.Fragment,{children:[c==="posts"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.length===0?e.jsxs("div",{className:"col-span-full text-center py-12 bg-zinc-900/50 rounded-2xl border border-white/10",children:[e.jsx(f,{className:"w-12 h-12 text-white/20 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-semibold mb-2",children:"Aucun post"}),e.jsx("p",{className:"text-white/50 text-sm mb-4",children:"Cr√©ez votre premier post avec l'IA"}),e.jsx("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-amber-500 text-white rounded-xl font-medium",children:"G√©n√©rer un post"})]}):d.map(t=>e.jsxs("div",{className:"bg-zinc-900/80 border border-white/10 rounded-2xl overflow-hidden hover:border-amber-500/30 transition-all",children:[t.media_url&&e.jsx("div",{className:"aspect-square bg-zinc-800",children:e.jsx("img",{src:t.media_url,alt:"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E(t.platform),g(t.status)]}),e.jsx("p",{className:"text-white text-sm line-clamp-3 mb-3",children:t.content}),t.hashtags&&t.hashtags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:t.hashtags.slice(0,5).map((s,a)=>e.jsxs("span",{className:"text-xs text-amber-400",children:["#",s]},a))}),t.scheduled_at&&e.jsxs("p",{className:"text-xs text-white/40 flex items-center gap-1 mb-3",children:[e.jsx(J,{className:"w-3 h-3"}),new Date(t.scheduled_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}),t.stats&&e.jsxs("div",{className:"flex gap-4 text-xs text-white/50 border-t border-white/10 pt-3",children:[e.jsxs("span",{children:["‚ù§Ô∏è ",t.stats.likes]}),e.jsxs("span",{children:["üí¨ ",t.stats.comments]}),e.jsxs("span",{children:["üîÑ ",t.stats.shares]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-white/5 hover:bg-white/10 text-white/70 rounded-lg text-sm transition-all",children:e.jsx(X,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>A(t.id),className:"flex items-center justify-center px-3 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg text-sm transition-all",children:e.jsx(H,{className:"w-4 h-4"})}),t.status==="draft"&&e.jsxs("button",{className:"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-amber-500/20 hover:bg-amber-500/30 text-amber-400 rounded-lg text-sm transition-all",children:[e.jsx(F,{className:"w-4 h-4"}),"Publier"]})]})]})]},t.id))}),c==="campaigns"&&e.jsx("div",{className:"space-y-4",children:x.length===0?e.jsxs("div",{className:"text-center py-12 bg-zinc-900/50 rounded-2xl border border-white/10",children:[e.jsx(j,{className:"w-12 h-12 text-white/20 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-semibold mb-2",children:"Aucune campagne"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Cr√©ez votre premi√®re campagne de relance"})]}):x.map(t=>e.jsxs("div",{className:"bg-zinc-900/80 border border-white/10 rounded-2xl p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:t.name}),e.jsx("p",{className:"text-white/50 text-sm",children:t.type})]}),g(t.status)]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:t.target_count}),e.jsx("p",{className:"text-xs text-white/50",children:"Cibl√©s"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-400",children:t.sent_count}),e.jsx("p",{className:"text-xs text-white/50",children:"Envoy√©s"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-green-400",children:t.opened_count}),e.jsx("p",{className:"text-xs text-white/50",children:"Ouverts"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-amber-400",children:t.clicked_count}),e.jsx("p",{className:"text-xs text-white/50",children:"Clics"})]})]})]},t.id))}),c==="stats"&&e.jsxs("div",{className:"text-center py-12 bg-zinc-900/50 rounded-2xl border border-white/10",children:[e.jsx(w,{className:"w-12 h-12 text-white/20 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-semibold mb-2",children:"Statistiques d√©taill√©es"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Les statistiques avanc√©es seront bient√¥t disponibles"})]})]})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-2xl w-full max-w-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-amber-400"}),"G√©n√©rer un post IA"]}),e.jsx("button",{onClick:()=>n(!1),className:"text-white/50 hover:text-white",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/70 mb-2",children:"Plateforme"}),e.jsx("div",{className:"flex gap-2",children:["instagram","facebook"].map(t=>e.jsxs("button",{onClick:()=>m({...r,platform:t}),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border transition-all ${r.platform===t?"border-amber-500 bg-amber-500/10 text-white":"border-white/10 text-white/50 hover:border-white/30"}`,children:[t==="instagram"?e.jsx(v,{className:"w-5 h-5"}):e.jsx(y,{className:"w-5 h-5"}),t.charAt(0).toUpperCase()+t.slice(1)]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/70 mb-2",children:"Type de post"}),e.jsxs("select",{value:r.occasion,onChange:t=>m({...r,occasion:t.target.value}),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:border-amber-500 focus:outline-none",children:[e.jsx("option",{value:"promo",children:"Promotion"}),e.jsx("option",{value:"nouveaute",children:"Nouveaut√©"}),e.jsx("option",{value:"conseil",children:"Conseil beaut√©"}),e.jsx("option",{value:"evenement",children:"√âv√©nement"}),e.jsx("option",{value:"temoignage",children:"T√©moignage client"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/70 mb-2",children:"Ton"}),e.jsxs("select",{value:r.tone,onChange:t=>m({...r,tone:t.target.value}),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:border-amber-500 focus:outline-none",children:[e.jsx("option",{value:"professionnel",children:"Professionnel"}),e.jsx("option",{value:"fun",children:"Fun & d√©contract√©"}),e.jsx("option",{value:"inspirant",children:"Inspirant"}),e.jsx("option",{value:"urgent",children:"Urgence / FOMO"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/70 mb-2",children:"D√©tails (optionnel)"}),e.jsx("textarea",{value:r.details,onChange:t=>m({...r,details:t.target.value}),placeholder:"Ex: -20% sur les tresses cette semaine...",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 focus:border-amber-500 focus:outline-none resize-none h-24"})]})]}),e.jsxs("div",{className:"flex gap-3 p-4 border-t border-white/10",children:[e.jsx("button",{onClick:()=>n(!1),className:"flex-1 px-4 py-3 border border-white/10 text-white/70 rounded-xl hover:bg-white/5 transition-all",children:"Annuler"}),e.jsx("button",{onClick:T,disabled:p,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl font-medium disabled:opacity-50 transition-all",children:p?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-5 h-5 animate-spin"}),"G√©n√©ration..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-5 h-5"}),"G√©n√©rer"]})})]})]})})]})}export{ge as default};
