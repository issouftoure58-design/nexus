import{c as I,r as n,a as T,j as e,L as y,t as g}from"./index-_yXYEqcL.js";import{A as _}from"./AdminLayout-CTeGiCEF.js";import{S as j}from"./sparkles-BX8nnFHk.js";import{W as N}from"./wand-sparkles-ogdxquMb.js";import{C as A}from"./clock-xh9IAeUk.js";import{S as $}from"./scissors-DPHsfmq1.js";import{Z as L}from"./zoom-in-DcGLHVA3.js";import{I as k}from"./image-nfPd-l1I.js";import"./file-text-DGGLtmm2.js";import"./settings-BkyowQvs.js";import"./user-Ai5-1aUm.js";import"./calendar-NWhThMGY.js";import"./users-DLPfMp13.js";import"./shopping-bag-CEo4UOGG.js";import"./message-square-BHRNNhOm.js";import"./chart-column-eauyrf0D.js";import"./chevron-right-DPdOXaL5.js";import"./log-out-CvuSphzZ.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=I("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);function re(){const[c,m]=n.useState(!1),[x,z]=n.useState("generate"),[i,w]=n.useState(null),[f,S]=n.useState([]),[v,C]=n.useState({images_generated:0,videos_generated:0,total_cost_credits:0}),{toast:o}=T(),[a,d]=n.useState({platform:"instagram",theme:"promotion",text:"",style:"moderne",quality:"standard"}),[r,h]=n.useState({imageUrl:"",action:"remove-background",scale:2,motion:"medium"});n.useEffect(()=>{b(),u()},[]);async function b(){try{const t=localStorage.getItem("admin_token"),s=await(await fetch("/api/admin/media/history?limit=20",{headers:{Authorization:`Bearer ${t}`}})).json();s.success&&S(s.history||[])}catch{}}async function u(){try{const t=localStorage.getItem("admin_token"),s=await(await fetch("/api/admin/media/usage",{headers:{Authorization:`Bearer ${t}`}})).json();s.success&&C(s.usage)}catch{}}async function U(){if(!a.text){o({title:"Erreur",description:"Veuillez entrer un texte",variant:"destructive"});return}m(!0);try{const t=localStorage.getItem("admin_token"),s=await(await fetch("/api/admin/media/generate/social-post",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(a)})).json();s.success?(w(s),b(),u(),o({title:"Post IA Genere !",description:`Image + caption pour ${a.platform}`})):o({title:"Erreur",description:s.error||"Echec generation",variant:"destructive"})}catch{o({title:"Erreur",description:"Echec generation",variant:"destructive"})}finally{m(!1)}}async function E(){if(!r.imageUrl){o({title:"Erreur",description:"URL image requise",variant:"destructive"});return}m(!0);try{const t=localStorage.getItem("admin_token");let l="",s={};r.action==="remove-background"?(l="/api/admin/media/remove-background",s={imageUrl:r.imageUrl}):r.action==="upscale"?(l="/api/admin/media/upscale",s={imageUrl:r.imageUrl,scale:r.scale}):(l="/api/admin/media/generate/video",s={imageUrl:r.imageUrl,motion:r.motion});const p=await(await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(s)})).json();p.success?(w({success:!0,url:p.url}),b(),u(),o({title:"Traitement termine !"})):o({title:"Erreur",description:p.error,variant:"destructive"})}catch{o({title:"Erreur",description:"Echec traitement",variant:"destructive"})}finally{m(!1)}}return e.jsx(_,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Medias IA"}),e.jsx("p",{className:"text-white/50",children:"Generez images, videos et posts avec l'IA"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/40",children:"Ce mois"}),e.jsxs("p",{className:"text-sm text-white/80",children:[v.images_generated," images / ",v.videos_generated," videos"]})]})})]}),e.jsx("div",{className:"flex gap-2",children:[{id:"generate",label:"Generer Post",icon:j},{id:"tools",label:"Outils",icon:N},{id:"history",label:"Historique",icon:A}].map(t=>{const l=t.icon;return e.jsxs("button",{onClick:()=>z(t.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${x===t.id?"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-lg shadow-amber-500/30":"bg-white/5 text-white/60 hover:bg-white/10 hover:text-white"}`,children:[e.jsx(l,{size:16}),t.label]},t.id)})}),x==="generate"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur-xl border border-white/10 rounded-2xl p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Creer un post"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/60 mb-1.5 block",children:"Plateforme"}),e.jsxs("select",{className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2.5 text-white focus:border-amber-500/50 focus:outline-none",value:a.platform,onChange:t=>d({...a,platform:t.target.value}),children:[e.jsx("option",{value:"instagram",children:"Instagram"}),e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/60 mb-1.5 block",children:"Theme"}),e.jsxs("select",{className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2.5 text-white focus:border-amber-500/50 focus:outline-none",value:a.theme,onChange:t=>d({...a,theme:t.target.value}),children:[e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"event",children:"Evenement"}),e.jsx("option",{value:"info",children:"Information"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/60 mb-1.5 block",children:"Texte du post"}),e.jsx("input",{type:"text",className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2.5 text-white placeholder-white/30 focus:border-amber-500/50 focus:outline-none",placeholder:"Ex: Soldes -30% ce weekend !",value:a.text,onChange:t=>d({...a,text:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/60 mb-1.5 block",children:"Style"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["moderne","elegante","colore","minimal"].map(t=>e.jsx("button",{onClick:()=>d({...a,style:t}),className:`px-3 py-2 rounded-xl text-sm capitalize transition-all ${a.style===t?"bg-amber-500/20 border border-amber-500/50 text-amber-400":"bg-white/5 border border-white/10 text-white/60 hover:bg-white/10"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/60 mb-1.5 block",children:"Qualite"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>d({...a,quality:"standard"}),className:`px-3 py-2 rounded-xl text-sm transition-all ${a.quality==="standard"?"bg-amber-500/20 border border-amber-500/50 text-amber-400":"bg-white/5 border border-white/10 text-white/60 hover:bg-white/10"}`,children:"Standard (0.30EUR)"}),e.jsx("button",{onClick:()=>d({...a,quality:"hd"}),className:`px-3 py-2 rounded-xl text-sm transition-all ${a.quality==="hd"?"bg-amber-500/20 border border-amber-500/50 text-amber-400":"bg-white/5 border border-white/10 text-white/60 hover:bg-white/10"}`,children:"HD (0.45EUR)"})]})]}),e.jsx("button",{onClick:U,disabled:c,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white font-semibold rounded-xl shadow-lg shadow-amber-500/30 hover:shadow-amber-500/50 transition-all disabled:opacity-50",children:c?e.jsxs(e.Fragment,{children:[e.jsx(y,{size:18,className:"animate-spin"}),"Generation en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{size:18}),"Generer avec IA"]})})]}),e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Previsualisation"}),i?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10",children:e.jsx("img",{src:i.image||i.url,alt:"Post genere",className:"w-full h-auto"})}),i.caption&&e.jsx("div",{className:"p-4 bg-white/5 rounded-xl border border-white/10",children:e.jsx("p",{className:"text-sm text-white/80 whitespace-pre-wrap",children:i.caption})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("a",{href:i.image||i.url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-white/5 border border-white/10 rounded-xl text-white/70 hover:bg-white/10 transition-all",children:[e.jsx(g,{size:16}),"Telecharger"]}),e.jsx("button",{className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:shadow-lg transition-all",children:"Publier"})]})]}):e.jsx("div",{className:"h-64 flex items-center justify-center border-2 border-dashed border-white/10 rounded-xl",children:e.jsxs("div",{className:"text-center text-white/30",children:[e.jsx(j,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Votre post apparaitra ici"})]})})]})]}),x==="tools"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur-xl border border-white/10 rounded-2xl p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Outils image/video"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"remove-background",label:"Fond",icon:$,price:"0.15EUR"},{id:"upscale",label:"Upscale",icon:L,price:"0.24EUR"},{id:"video",label:"Video",icon:F,price:"1.50EUR"}].map(t=>{const l=t.icon;return e.jsxs("button",{onClick:()=>h({...r,action:t.id}),className:`flex flex-col items-center gap-1 p-3 rounded-xl text-sm transition-all ${r.action===t.id?"bg-amber-500/20 border border-amber-500/50 text-amber-400":"bg-white/5 border border-white/10 text-white/60 hover:bg-white/10"}`,children:[e.jsx(l,{size:20}),e.jsx("span",{children:t.label}),e.jsx("span",{className:"text-xs opacity-60",children:t.price})]},t.id)})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/60 mb-1.5 block",children:"URL de l'image"}),e.jsx("input",{type:"text",className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2.5 text-white placeholder-white/30 focus:border-amber-500/50 focus:outline-none",placeholder:"https://...",value:r.imageUrl,onChange:t=>h({...r,imageUrl:t.target.value})})]}),r.action==="upscale"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/60 mb-1.5 block",children:"Facteur"}),e.jsx("div",{className:"flex gap-2",children:[2,4].map(t=>e.jsxs("button",{onClick:()=>h({...r,scale:t}),className:`flex-1 px-3 py-2 rounded-xl text-sm transition-all ${r.scale===t?"bg-amber-500/20 border border-amber-500/50 text-amber-400":"bg-white/5 border border-white/10 text-white/60"}`,children:["x",t]},t))})]}),r.action==="video"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/60 mb-1.5 block",children:"Mouvement"}),e.jsx("div",{className:"flex gap-2",children:["low","medium","high"].map(t=>e.jsx("button",{onClick:()=>h({...r,motion:t}),className:`flex-1 px-3 py-2 rounded-xl text-sm capitalize transition-all ${r.motion===t?"bg-amber-500/20 border border-amber-500/50 text-amber-400":"bg-white/5 border border-white/10 text-white/60"}`,children:t},t))})]}),e.jsx("button",{onClick:E,disabled:c,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white font-semibold rounded-xl shadow-lg shadow-amber-500/30 transition-all disabled:opacity-50",children:c?e.jsxs(e.Fragment,{children:[e.jsx(y,{size:18,className:"animate-spin"}),"Traitement..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{size:18}),"Lancer"]})})]}),e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Resultat"}),i?.url?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10",children:r.action==="video"?e.jsx("video",{src:i.url,controls:!0,className:"w-full"}):e.jsx("img",{src:i.url,alt:"Resultat",className:"w-full h-auto"})}),e.jsxs("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-white/5 border border-white/10 rounded-xl text-white/70 hover:bg-white/10 transition-all",children:[e.jsx(g,{size:16}),"Telecharger"]})]}):e.jsx("div",{className:"h-64 flex items-center justify-center border-2 border-dashed border-white/10 rounded-xl",children:e.jsxs("div",{className:"text-center text-white/30",children:[e.jsx(k,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Le resultat apparaitra ici"})]})})]})]}),x==="history"&&e.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Historique des generations"}),f.length===0?e.jsxs("div",{className:"text-center py-12 text-white/30",children:[e.jsx(k,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Aucune generation pour le moment"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:f.map(t=>e.jsxs("div",{className:"group relative rounded-xl overflow-hidden border border-white/10",children:[e.jsx("img",{src:t.output_url,alt:"",className:"w-full aspect-square object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2",children:[e.jsx("span",{className:"text-xs text-white/80 px-2 py-1 bg-white/10 rounded-full",children:t.model}),t.platform&&e.jsx("span",{className:"text-xs text-amber-400 px-2 py-1 bg-amber-500/10 rounded-full",children:t.platform}),e.jsx("a",{href:t.output_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:e.jsx(g,{size:16,className:"text-white"})})]})]},t.id))})]})]})})}export{re as default};
