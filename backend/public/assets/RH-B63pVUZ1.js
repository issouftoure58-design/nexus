import{c as N,r as n,j as e,L as U,C as O,X as B}from"./index-_yXYEqcL.js";import{A as _e,T as ke,U as Se}from"./AdminLayout-CTeGiCEF.js";import{U as P}from"./users-DLPfMp13.js";import{C as D}from"./calendar-NWhThMGY.js";import{C as W}from"./clock-xh9IAeUk.js";import{U as ze}from"./user-plus-D-GPpyUV.js";import{P as S}from"./pen-H50PqqQV.js";import{T as z}from"./trash-2-CXbRkBbN.js";import{P as J}from"./plus-D6ktc07k.js";import{G as De}from"./graduation-cap-C679OTK5.js";import{H as q}from"./heart-DDZOemK6.js";import{C as A}from"./check-B1pij6wq.js";import"./file-text-DGGLtmm2.js";import"./image-nfPd-l1I.js";import"./settings-BkyowQvs.js";import"./user-Ai5-1aUm.js";import"./scissors-DPHsfmq1.js";import"./shopping-bag-CEo4UOGG.js";import"./message-square-BHRNNhOm.js";import"./sparkles-BX8nnFHk.js";import"./chart-column-eauyrf0D.js";import"./chevron-right-DPdOXaL5.js";import"./log-out-CvuSphzZ.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=N("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=N("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=N("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=N("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=N("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=N("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),E={conge_paye:{label:"Congé payé",icon:G},rtt:{label:"RTT",icon:W},maladie:{label:"Maladie",icon:q},maternite:{label:"Maternité",icon:q},paternite:{label:"Paternité",icon:q},sans_solde:{label:"Sans solde",icon:Me},formation:{label:"Formation",icon:De},evenement_familial:{label:"Événement familial",icon:P},autre:{label:"Autre",icon:D}},qe={cdi:"CDI",cdd:"CDD",freelance:"Freelance",stage:"Stage",apprentissage:"Apprentissage"};function st(){const[y,X]=n.useState("equipe"),[v,Z]=n.useState([]),[V,K]=n.useState([]),[_,Q]=n.useState([]),[F,ee]=n.useState([]),[f,te]=n.useState(null),[se,L]=n.useState(!0),[ie,u]=n.useState(!1),[d,ae]=n.useState("membre"),[s,p]=n.useState(null),[C,x]=n.useState(!1),[M,re]=n.useState(()=>{const t=new Date,a=de(t);return`${t.getFullYear()}-W${String(a).padStart(2,"0")}`}),[k,le]=n.useState(()=>{const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`}),[c,ne]=n.useState("jour");function de(t){const a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),i=a.getUTCDay()||7;a.setUTCDate(a.getUTCDate()+4-i);const r=new Date(Date.UTC(a.getUTCFullYear(),0,1));return Math.ceil(((a.getTime()-r.getTime())/864e5+1)/7)}n.useEffect(()=>{h()},[M,k]);const h=async()=>{L(!0);const a={Authorization:`Bearer ${localStorage.getItem("admin_token")}`};try{const[i,r,b,j,o]=await Promise.all([fetch("/api/rh/equipe",{headers:a}).then(l=>l.json()).catch(()=>({equipe:[]})),fetch(`/api/rh/planning?semaine=${M}`,{headers:a}).then(l=>l.json()).catch(()=>({shifts:[]})),fetch("/api/rh/absences",{headers:a}).then(l=>l.json()).catch(()=>({absences:[]})),fetch(`/api/rh/pointages?mois=${k}`,{headers:a}).then(l=>l.json()).catch(()=>({pointages:[]})),fetch(`/api/rh/stats?mois=${k}`,{headers:a}).then(l=>l.json()).catch(()=>({stats:null}))]);Z(i.equipe||[]),K(r.shifts||[]),Q(b.absences||[]),ee(j.pointages||[]),te(o.stats||null)}catch(i){console.error("Erreur chargement RH:",i)}finally{L(!1)}},oe=async t=>{x(!0);const a=localStorage.getItem("admin_token");try{const i=s?.id?`/api/rh/equipe/${s.id}`:"/api/rh/equipe",r=s?.id?"PUT":"POST";await fetch(i,{method:r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(t)}),u(!1),p(null),h()}catch(i){console.error("Erreur sauvegarde:",i)}finally{x(!1)}},ce=async t=>{x(!0);const a=localStorage.getItem("admin_token");try{if(s?.id)await fetch(`/api/rh/planning/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({membre_id:t.membre_id,date_shift:t.date_shift,heure_debut:t.heure_debut,heure_fin:t.heure_fin,type_shift:t.type_shift,lieu:t.lieu})});else{const i=t.mode||"jour",r=new Date(t.date_shift),b=t.jours_semaine||["1","2","3","4","5"],j=[];if(i==="jour")j.push({membre_id:t.membre_id,date_shift:t.date_shift,heure_debut:t.heure_debut,heure_fin:t.heure_fin,type_shift:t.type_shift,lieu:t.lieu});else if(i==="semaine"){const o=new Date(r),l=o.getDay();o.setDate(o.getDate()-(l===0?6:l-1));for(let g=0;g<7;g++)if(b.includes(String(g+1))){const w=new Date(o);w.setDate(o.getDate()+g),j.push({membre_id:t.membre_id,date_shift:w.toISOString().split("T")[0],heure_debut:t.heure_debut,heure_fin:t.heure_fin,type_shift:t.type_shift,lieu:t.lieu})}}else if(i==="mois"){const o=r.getFullYear(),l=r.getMonth(),g=new Date(o,l+1,0).getDate();for(let w=1;w<=g;w++){const R=new Date(o,l,w),H=R.getDay(),ve=H===0?7:H;b.includes(String(ve))&&j.push({membre_id:t.membre_id,date_shift:R.toISOString().split("T")[0],heure_debut:t.heure_debut,heure_fin:t.heure_fin,type_shift:t.type_shift,lieu:t.lieu})}}for(const o of j)await fetch("/api/rh/planning",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(o)})}u(!1),p(null),h()}catch(i){console.error("Erreur sauvegarde shift:",i)}finally{x(!1)}},he=async t=>{x(!0);const a=localStorage.getItem("admin_token");try{const i=s?.id?`/api/rh/absences/${s.id}`:"/api/rh/absences",r=s?.id?"PUT":"POST";await fetch(i,{method:r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(t)}),u(!1),p(null),h()}catch(i){console.error("Erreur sauvegarde absence:",i)}finally{x(!1)}},xe=async t=>{x(!0);const a=localStorage.getItem("admin_token");try{const i=s?.id?`/api/rh/pointages/${s.id}`:"/api/rh/pointages",r=s?.id?"PUT":"POST";await fetch(i,{method:r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(t)}),u(!1),p(null),h()}catch(i){console.error("Erreur sauvegarde pointage:",i)}finally{x(!1)}},me=async t=>{const a=localStorage.getItem("admin_token");try{await fetch(`/api/rh/pointages/${t}/valider`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}}),h()}catch(i){console.error("Erreur validation pointage:",i)}},ue=async t=>{if(!confirm("Supprimer ce pointage ?"))return;const a=localStorage.getItem("admin_token");try{await fetch(`/api/rh/pointages/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}}),h()}catch(i){console.error("Erreur suppression pointage:",i)}},I=async(t,a)=>{const i=localStorage.getItem("admin_token");try{await fetch(`/api/rh/absences/${t}/statut`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({statut:a?"approuve":"refuse"})}),h()}catch(r){console.error("Erreur validation:",r)}},T=async(t,a)=>{if(!confirm("Confirmer la suppression ?"))return;const i=localStorage.getItem("admin_token");try{await fetch(`/api/rh/${t}/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`}}),h()}catch(r){console.error("Erreur suppression:",r)}},m=(t,a)=>{ae(t),p(a||null),u(!0)},pe=t=>{const a={cdi:"bg-green-500/20 text-green-400",cdd:"bg-yellow-500/20 text-yellow-400",freelance:"bg-purple-500/20 text-purple-400",stage:"bg-blue-500/20 text-blue-400",apprentissage:"bg-cyan-500/20 text-cyan-400"};return e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${a[t]||"bg-gray-500/20 text-gray-400"}`,children:qe[t]||t})},be=t=>{const a={en_attente:"bg-yellow-500/20 text-yellow-400",approuve:"bg-green-500/20 text-green-400",refuse:"bg-red-500/20 text-red-400",annule:"bg-gray-500/20 text-gray-400"},i={en_attente:"En attente",approuve:"Approuvé",refuse:"Refusé",annule:"Annulé"};return e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${a[t]||a.en_attente}`,children:i[t]||t})},fe=()=>e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-800/20 border border-blue-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(P,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-xs text-white/60",children:"Effectif actif"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:f?.effectif_actif||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-600/20 to-green-800/20 border border-green-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(W,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-xs text-white/60",children:"Heures travaillées"})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[f?.heures_travaillees_total||0,"h"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-600/20 to-orange-800/20 border border-orange-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ke,{className:"w-5 h-5 text-orange-400"}),e.jsx("span",{className:"text-xs text-white/60",children:"Heures supp."})]}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[f?.heures_supplementaires_total||0,"h"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-purple-800/20 border border-purple-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(D,{className:"w-5 h-5 text-purple-400"}),e.jsx("span",{className:"text-xs text-white/60",children:"Jours absence"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:f?.jours_absence_total||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-600/20 to-yellow-800/20 border border-yellow-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(O,{className:"w-5 h-5 text-yellow-400"}),e.jsx("span",{className:"text-xs text-white/60",children:"En attente"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:f?.absences_en_attente||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-600/20 to-cyan-800/20 border border-cyan-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ce,{className:"w-5 h-5 text-cyan-400"}),e.jsx("span",{className:"text-xs text-white/60",children:"Pointages"})]}),e.jsx("p",{className:"text-2xl font-bold text-white",children:f?.nb_pointages_mois||0})]})]}),je=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Équipe (",v.length,")"]}),e.jsxs("button",{onClick:()=>m("membre"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:shadow-lg hover:shadow-amber-500/30 transition-all",children:[e.jsx(ze,{size:18}),"Ajouter"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:v.map(t=>e.jsxs("div",{className:`bg-zinc-900/50 border rounded-2xl p-4 ${t.actif?"border-white/10":"border-red-500/30 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:[t.prenom[0],t.nom[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-white",children:[t.prenom," ",t.nom]}),e.jsx("p",{className:"text-sm text-white/60",children:t.role})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>m("membre",t),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-white/60 hover:text-amber-400",children:e.jsx(S,{size:16})}),e.jsx("button",{onClick:()=>T("equipe",t.id),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-white/60 hover:text-red-400",children:e.jsx(z,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Contrat"}),pe(t.type_contrat)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Heures/sem"}),e.jsxs("span",{className:"text-white",children:[t.heures_semaine,"h"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Depuis"}),e.jsx("span",{className:"text-white",children:new Date(t.date_embauche).toLocaleDateString("fr-FR")})]}),t.email&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60",children:"Email"}),e.jsx("span",{className:"text-white truncate ml-2",children:t.email})]})]}),!t.actif&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-red-500/30 flex items-center gap-2 text-red-400 text-sm",children:[e.jsx(Se,{size:14}),"Membre inactif"]})]},t.id))})]}),ge=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Planning"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"week",value:M,onChange:t=>re(t.target.value),className:"px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"}),e.jsxs("button",{onClick:()=>m("shift"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:shadow-lg hover:shadow-amber-500/30 transition-all",children:[e.jsx(J,{size:18}),"Ajouter shift"]})]})]}),V.length===0?e.jsxs("div",{className:"bg-zinc-900/50 border border-white/10 rounded-2xl p-8 text-center",children:[e.jsx(Y,{className:"w-12 h-12 mx-auto mb-4 text-white/30"}),e.jsx("p",{className:"text-white/60",children:"Aucun shift planifié cette semaine"})]}):e.jsx("div",{className:"bg-zinc-900/50 border border-white/10 rounded-2xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Membre"}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Date"}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Horaires"}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Type"}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Lieu"}),e.jsx("th",{className:"text-right p-4 text-white/60 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:V.map(t=>e.jsxs("tr",{className:"border-t border-white/5",children:[e.jsx("td",{className:"p-4 text-white",children:t.equipe?`${t.equipe.prenom} ${t.equipe.nom}`:"-"}),e.jsx("td",{className:"p-4 text-white",children:new Date(t.date_shift).toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})}),e.jsx("td",{className:"p-4 text-white",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(G,{size:14,className:"text-amber-400"}),t.heure_debut,e.jsx("span",{className:"text-white/40",children:"→"}),e.jsx(Te,{size:14,className:"text-blue-400"}),t.heure_fin]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-500/20 text-blue-400",children:t.type_shift})}),e.jsx("td",{className:"p-4 text-white/60",children:t.lieu||"-"}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx("button",{onClick:()=>m("shift",t),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-white/60 hover:text-amber-400",title:"Modifier",children:e.jsx(S,{size:16})}),e.jsx("button",{onClick:()=>T("planning",t.id),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-white/60 hover:text-red-400",title:"Supprimer",children:e.jsx(z,{size:16})})]})})]},t.id))})]})})]}),we=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Absences (",_.length,")"]}),e.jsxs("button",{onClick:()=>m("absence"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:shadow-lg hover:shadow-amber-500/30 transition-all",children:[e.jsx(J,{size:18}),"Nouvelle absence"]})]}),_.filter(t=>t.statut==="en_attente").length>0&&e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-2xl p-4",children:[e.jsxs("h3",{className:"text-yellow-400 font-semibold mb-3 flex items-center gap-2",children:[e.jsx(O,{size:18}),"À valider"]}),e.jsx("div",{className:"space-y-3",children:_.filter(t=>t.statut==="en_attente").map(t=>e.jsxs("div",{className:"flex items-center justify-between bg-zinc-900/50 rounded-xl p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:t.equipe?`${t.equipe.prenom} ${t.equipe.nom}`:"-"}),e.jsxs("p",{className:"text-sm text-white/60",children:[E[t.type_absence]?.label||t.type_absence," •"," ",new Date(t.date_debut).toLocaleDateString("fr-FR")," →"," ",new Date(t.date_fin).toLocaleDateString("fr-FR")," •"," ",t.nb_jours," jour(s)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I(t.id,!0),className:"p-2 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-lg transition",children:e.jsx(A,{size:18})}),e.jsx("button",{onClick:()=>I(t.id,!1),className:"p-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition",children:e.jsx(B,{size:18})})]})]},t.id))})]}),e.jsx("div",{className:"bg-zinc-900/50 border border-white/10 rounded-2xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Membre"}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Type"}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Période"}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Jours"}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Statut"}),e.jsx("th",{className:"text-right p-4 text-white/60 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:_.map(t=>{const a=E[t.type_absence]?.icon||D;return e.jsxs("tr",{className:"border-t border-white/5",children:[e.jsx("td",{className:"p-4 text-white",children:t.equipe?`${t.equipe.prenom} ${t.equipe.nom}`:"-"}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:"flex items-center gap-2 text-white",children:[e.jsx(a,{size:14,className:"text-amber-400"}),E[t.type_absence]?.label||t.type_absence]})}),e.jsxs("td",{className:"p-4 text-white/80",children:[new Date(t.date_debut).toLocaleDateString("fr-FR")," →"," ",new Date(t.date_fin).toLocaleDateString("fr-FR")]}),e.jsx("td",{className:"p-4 text-white",children:t.nb_jours}),e.jsx("td",{className:"p-4",children:be(t.statut)}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx("button",{onClick:()=>m("absence",t),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-white/60 hover:text-amber-400",title:"Modifier",children:e.jsx(S,{size:16})}),e.jsx("button",{onClick:()=>T("absences",t.id),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-white/60 hover:text-red-400",title:"Supprimer",children:e.jsx(z,{size:16})})]})})]},t.id)})})]})})]}),Ne=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Pointages"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"month",value:k,onChange:t=>le(t.target.value),className:"px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"}),e.jsxs("button",{onClick:()=>m("pointage"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:shadow-lg hover:shadow-amber-500/30 transition-all",children:[e.jsx($,{size:18}),"Pointer"]})]})]}),F.length===0?e.jsxs("div",{className:"bg-zinc-900/50 border border-white/10 rounded-2xl p-8 text-center",children:[e.jsx($,{className:"w-12 h-12 mx-auto mb-4 text-white/30"}),e.jsx("p",{className:"text-white/60",children:"Aucun pointage ce mois"})]}):e.jsx("div",{className:"bg-zinc-900/50 border border-white/10 rounded-2xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Membre"}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Date"}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Arrivée"}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Départ"}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Heures"}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Supp."}),e.jsx("th",{className:"text-left p-4 text-white/60 font-medium",children:"Statut"}),e.jsx("th",{className:"text-right p-4 text-white/60 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:F.map(t=>e.jsxs("tr",{className:"border-t border-white/5",children:[e.jsx("td",{className:"p-4 text-white",children:t.equipe?`${t.equipe.prenom} ${t.equipe.nom}`:"-"}),e.jsx("td",{className:"p-4 text-white",children:new Date(t.date_pointage).toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})}),e.jsx("td",{className:"p-4 text-green-400",children:t.heure_arrivee}),e.jsx("td",{className:"p-4 text-orange-400",children:t.heure_depart||"-"}),e.jsxs("td",{className:"p-4 text-white",children:[t.heures_travaillees?.toFixed(1)||"-","h"]}),e.jsx("td",{className:"p-4",children:t.heures_supplementaires&&t.heures_supplementaires>0?e.jsxs("span",{className:"text-amber-400",children:["+",t.heures_supplementaires.toFixed(1),"h"]}):e.jsx("span",{className:"text-white/40",children:"-"})}),e.jsx("td",{className:"p-4",children:t.valide?e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-500/20 text-green-400",children:"Validé"}):e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-yellow-500/20 text-yellow-400",children:"À valider"})}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[!t.valide&&e.jsx("button",{onClick:()=>me(t.id),className:"p-1.5 bg-green-500/20 hover:bg-green-500/30 rounded-lg transition text-green-400",title:"Valider",children:e.jsx(A,{size:16})}),e.jsx("button",{onClick:()=>m("pointage",t),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-white/60 hover:text-amber-400",title:"Modifier",children:e.jsx(S,{size:16})}),e.jsx("button",{onClick:()=>ue(t.id),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-white/60 hover:text-red-400",title:"Supprimer",children:e.jsx(z,{size:16})})]})})]},t.id))})]})})]}),ye=()=>ie?e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:[d==="membre"&&(s?"Modifier membre":"Ajouter un membre"),d==="shift"&&(s?"Modifier le shift":"Ajouter un shift"),d==="absence"&&(s?"Modifier l'absence":"Déclarer une absence"),d==="pointage"&&(s?"Modifier le pointage":"Nouveau pointage")]}),e.jsx("button",{onClick:()=>{u(!1),p(null)},className:"p-2 hover:bg-white/10 rounded-lg transition",children:e.jsx(B,{size:20,className:"text-white/60"})})]}),e.jsxs("form",{onSubmit:t=>{t.preventDefault();const a=new FormData(t.currentTarget),i={};for(const[r,b]of a.entries())r==="jours_semaine"?(i.jours_semaine||(i.jours_semaine=[]),i.jours_semaine.push(b)):i[r]=b;d==="membre"?oe(i):d==="shift"?ce(i):d==="absence"?he(i):d==="pointage"&&xe(i)},className:"p-6 space-y-4",children:[d==="membre"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Prénom *"}),e.jsx("input",{type:"text",name:"prenom",defaultValue:s?.prenom,required:!0,className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Nom *"}),e.jsx("input",{type:"text",name:"nom",defaultValue:s?.nom,required:!0,className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Rôle *"}),e.jsx("input",{type:"text",name:"role",defaultValue:s?.role,placeholder:"ex: Coiffeuse, Manager...",required:!0,className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Type de contrat"}),e.jsxs("select",{name:"type_contrat",defaultValue:s?.type_contrat||"cdi",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white",children:[e.jsx("option",{value:"cdi",children:"CDI"}),e.jsx("option",{value:"cdd",children:"CDD"}),e.jsx("option",{value:"freelance",children:"Freelance"}),e.jsx("option",{value:"stage",children:"Stage"}),e.jsx("option",{value:"apprentissage",children:"Apprentissage"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Heures/semaine"}),e.jsx("input",{type:"number",name:"heures_semaine",defaultValue:s?.heures_semaine||35,step:"0.5",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Date d'embauche *"}),e.jsx("input",{type:"date",name:"date_embauche",defaultValue:s?.date_embauche,required:!0,className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"email",defaultValue:s?.email,className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Téléphone"}),e.jsx("input",{type:"tel",name:"telephone",defaultValue:s?.telephone,className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]})]})]}),d==="shift"&&e.jsxs(e.Fragment,{children:[!s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-3 text-sm text-blue-300",children:"Créez un planning pour un jour, une semaine ou un mois entier."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Mode de création"}),e.jsx("div",{className:"flex gap-2",children:[{id:"jour",label:"Un jour"},{id:"semaine",label:"Une semaine"},{id:"mois",label:"Un mois"}].map(t=>e.jsx("button",{type:"button",onClick:()=>ne(t.id),className:`flex-1 px-3 py-2 rounded-xl text-sm transition ${c===t.id?"bg-amber-500 text-white":"bg-zinc-800 text-white/60 hover:bg-zinc-700"}`,children:t.label},t.id))}),e.jsx("input",{type:"hidden",name:"mode",value:c})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Membre *"}),e.jsxs("select",{name:"membre_id",required:!0,defaultValue:s?.membre_id||"",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white",children:[e.jsx("option",{value:"",children:"Sélectionner un membre"}),v.filter(t=>t.actif).map(t=>e.jsxs("option",{value:t.id,children:[t.prenom," ",t.nom]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:s||c==="jour"?"Date du shift *":c==="semaine"?"Semaine (choisir un jour de la semaine) *":"Mois (choisir un jour du mois) *"}),e.jsx("input",{type:"date",name:"date_shift",required:!0,defaultValue:s?.date_shift||new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]}),!s&&(c==="semaine"||c==="mois")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Jours travaillés"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"1",label:"Lun"},{id:"2",label:"Mar"},{id:"3",label:"Mer"},{id:"4",label:"Jeu"},{id:"5",label:"Ven"},{id:"6",label:"Sam"},{id:"7",label:"Dim"}].map(t=>e.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"jours_semaine",value:t.id,defaultChecked:["1","2","3","4","5"].includes(t.id),className:"w-4 h-4 rounded bg-zinc-800 border-white/20 text-amber-500"}),e.jsx("span",{className:"text-white text-sm",children:t.label})]},t.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Heure début *"}),e.jsx("input",{type:"time",name:"heure_debut",required:!0,defaultValue:s?.heure_debut||"09:00",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Heure fin *"}),e.jsx("input",{type:"time",name:"heure_fin",required:!0,defaultValue:s?.heure_fin||"17:00",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Type de shift"}),e.jsxs("select",{name:"type_shift",defaultValue:s?.type_shift||"journee",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white",children:[e.jsx("option",{value:"matin",children:"Matin"}),e.jsx("option",{value:"apres-midi",children:"Après-midi"}),e.jsx("option",{value:"journee",children:"Journée complète"}),e.jsx("option",{value:"soiree",children:"Soirée"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Lieu"}),e.jsx("input",{type:"text",name:"lieu",defaultValue:s?.lieu||"",placeholder:"ex: Domicile client, Salon...",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]})]}),!s&&(c==="semaine"||c==="mois")&&e.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-xl p-3 text-sm text-amber-300",children:c==="semaine"?"Les shifts seront créés pour les jours sélectionnés de la semaine.":"Les shifts seront créés pour tous les jours sélectionnés du mois."})]}),d==="absence"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Membre *"}),e.jsxs("select",{name:"membre_id",required:!0,defaultValue:s?.membre_id||"",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white",children:[e.jsx("option",{value:"",children:"Sélectionner un membre"}),v.filter(t=>t.actif).map(t=>e.jsxs("option",{value:t.id,children:[t.prenom," ",t.nom]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Type d'absence *"}),e.jsxs("select",{name:"type_absence",required:!0,defaultValue:s?.type_absence||"conge_paye",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white",children:[e.jsx("option",{value:"conge_paye",children:"Congé payé"}),e.jsx("option",{value:"rtt",children:"RTT"}),e.jsx("option",{value:"maladie",children:"Maladie"}),e.jsx("option",{value:"maternite",children:"Maternité"}),e.jsx("option",{value:"paternite",children:"Paternité"}),e.jsx("option",{value:"sans_solde",children:"Sans solde"}),e.jsx("option",{value:"formation",children:"Formation"}),e.jsx("option",{value:"evenement_familial",children:"Événement familial"}),e.jsx("option",{value:"autre",children:"Autre"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Date début *"}),e.jsx("input",{type:"date",name:"date_debut",required:!0,defaultValue:s?.date_debut||"",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Date fin *"}),e.jsx("input",{type:"date",name:"date_fin",required:!0,defaultValue:s?.date_fin||"",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Motif / Notes"}),e.jsx("textarea",{name:"motif",rows:2,defaultValue:s?.motif||"",placeholder:"Motif de l'absence...",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white resize-none"})]})]}),d==="pointage"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-3 text-sm text-green-300",children:s?"Modifiez les informations du pointage.":"Enregistrez l'arrivée et le départ d'un membre de l'équipe."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Membre *"}),e.jsxs("select",{name:"membre_id",required:!0,defaultValue:s?.membre_id||"",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white",children:[e.jsx("option",{value:"",children:"Sélectionner un membre"}),v.filter(t=>t.actif).map(t=>e.jsxs("option",{value:t.id,children:[t.prenom," ",t.nom]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Date *"}),e.jsx("input",{type:"date",name:"date_pointage",required:!0,defaultValue:s?.date_pointage||new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Heure d'arrivée *"}),e.jsx("input",{type:"time",name:"heure_arrivee",required:!0,defaultValue:s?.heure_arrivee||"09:00",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Heure de départ"}),e.jsx("input",{type:"time",name:"heure_depart",defaultValue:s?.heure_depart||"",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Heures supplémentaires"}),e.jsx("input",{type:"number",name:"heures_supplementaires",step:"0.5",min:"0",defaultValue:s?.heures_supplementaires||"",placeholder:"0",className:"w-full px-3 py-2 bg-zinc-800 border border-white/10 rounded-xl text-white"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),p(null)},className:"px-4 py-2 bg-white/10 text-white rounded-xl hover:bg-white/20 transition",children:"Annuler"}),e.jsxs("button",{type:"submit",disabled:C,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:shadow-lg hover:shadow-amber-500/30 transition-all disabled:opacity-50",children:[C?e.jsx(U,{size:18,className:"animate-spin"}):e.jsx(A,{size:18}),C?"Enregistrement...":"Enregistrer"]})]})]})]})}):null;return e.jsx(_e,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-orange-500",children:"Ressources Humaines"}),e.jsx("p",{className:"text-white/60 mt-1",children:"Gestion de l'équipe, planning et absences"})]})}),fe(),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[{id:"equipe",label:"Équipe",icon:P},{id:"planning",label:"Planning",icon:Y},{id:"absences",label:"Absences",icon:D},{id:"pointages",label:"Pointages",icon:$}].map(t=>e.jsxs("button",{onClick:()=>X(t.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all whitespace-nowrap ${y===t.id?"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-lg shadow-amber-500/30":"bg-zinc-800/50 text-white/60 hover:bg-zinc-800 hover:text-white"}`,children:[e.jsx(t.icon,{size:18}),t.label]},t.id))}),se?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(U,{className:"w-8 h-8 animate-spin text-amber-400"})}):e.jsxs(e.Fragment,{children:[y==="equipe"&&je(),y==="planning"&&ge(),y==="absences"&&we(),y==="pointages"&&Ne()]}),ye()]})})}export{st as default};
