import{c as S,b as z,$ as C,a as E,r,j as e,d as u,B as d}from"./index-_yXYEqcL.js";import{N as P}from"./navigation-CIqCX6Su.js";import{I as p}from"./input-TVuV-KxK.js";import{L as f}from"./label-BdSUWGgM.js";import{C as M}from"./circle-x-CE1ZE8zE.js";import{C as w}from"./circle-check-DHSvjqNQ.js";import{L as j}from"./lock-CdiT9bM9.js";import{E as R}from"./eye-off-DIw5pcxB.js";import{E as D}from"./eye-CvXJPXHv.js";import"./shopping-bag-CEo4UOGG.js";import"./user-Ai5-1aUm.js";import"./phone-DqBiH1an.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=S("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);function G(){const[,v]=z(),N=C(),{toast:o}=E(),[n,c]=r.useState(!1),[i,g]=r.useState(!1),[m,y]=r.useState(!1),[h,x]=r.useState(null),[s,b]=r.useState({password:"",confirmPassword:""}),l=new URLSearchParams(N).get("token");r.useEffect(()=>{l||x("Lien invalide ou expiré")},[l]);const L=async t=>{if(t.preventDefault(),s.password!==s.confirmPassword){o({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"});return}if(s.password.length<8){o({title:"Erreur",description:"Le mot de passe doit contenir au moins 8 caractères",variant:"destructive"});return}c(!0);try{const a=await fetch("/api/client/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:l,newPassword:s.password})}),k=await a.json();if(!a.ok)throw new Error(k.error||"Erreur lors de la réinitialisation");y(!0),o({title:"Mot de passe modifié",description:"Vous pouvez maintenant vous connecter"}),setTimeout(()=>{v("/mon-compte/connexion")},3e3)}catch(a){x(a.message),o({title:"Erreur",description:a.message,variant:"destructive"})}finally{c(!1)}};return e.jsxs("div",{className:"min-h-screen bg-zinc-950",children:[e.jsx(P,{}),e.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 african-pattern opacity-5"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-amber-500/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 left-0 w-80 h-80 bg-orange-500/10 rounded-full blur-3xl"})]}),e.jsx("div",{className:"fixed top-0 left-0 right-0 h-4 bg-black z-30"}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 h-4 bg-black z-30"}),e.jsx("div",{className:"fixed top-8 left-6 w-12 h-12 border-l-2 border-t-2 border-amber-500/30 z-20"}),e.jsx("div",{className:"fixed top-8 right-6 w-12 h-12 border-r-2 border-t-2 border-amber-500/30 z-20"}),e.jsx("div",{className:"fixed bottom-8 left-6 w-12 h-12 border-l-2 border-b-2 border-amber-500/30 z-20"}),e.jsx("div",{className:"fixed bottom-8 right-6 w-12 h-12 border-r-2 border-b-2 border-amber-500/30 z-20"}),e.jsx("main",{className:"relative z-10 flex items-center justify-center min-h-screen px-4 pt-20 pb-12",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-500/20 backdrop-blur-sm rounded-full border border-amber-500/30 mb-6",children:[e.jsx(I,{className:"h-4 w-4 text-amber-400"}),e.jsx("span",{className:"text-amber-300 text-sm font-medium",children:"Réinitialisation"})]}),e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:[e.jsx("span",{className:"text-white",children:"Nouveau "}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-orange-500",children:"mot de passe"})]}),e.jsx("p",{className:"text-white/60",children:"Choisissez un nouveau mot de passe sécurisé"})]}),e.jsxs("div",{className:"relative bg-white/5 backdrop-blur-sm border border-white/10 rounded-3xl p-8 overflow-hidden",children:[e.jsx("div",{className:"absolute top-4 left-4 w-6 h-6 border-l-2 border-t-2 border-amber-500/50 rounded-tl-lg"}),e.jsx("div",{className:"absolute top-4 right-4 w-6 h-6 border-r-2 border-t-2 border-amber-500/50 rounded-tr-lg"}),e.jsx("div",{className:"absolute bottom-4 left-4 w-6 h-6 border-l-2 border-b-2 border-amber-500/50 rounded-bl-lg"}),e.jsx("div",{className:"absolute bottom-4 right-4 w-6 h-6 border-r-2 border-b-2 border-amber-500/50 rounded-br-lg"}),h&&!m?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(M,{className:"h-8 w-8 text-red-400"})}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Lien invalide"}),e.jsx("p",{className:"text-white/60 mb-6",children:h}),e.jsx(u,{href:"/mon-compte/mot-de-passe-oublie",children:e.jsx(d,{className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600",children:"Demander un nouveau lien"})})]}):m?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(w,{className:"h-8 w-8 text-emerald-400"})}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Mot de passe modifié !"}),e.jsx("p",{className:"text-white/60 mb-6",children:"Vous allez être redirigé vers la page de connexion..."}),e.jsx(u,{href:"/mon-compte/connexion",children:e.jsx(d,{className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600",children:"Se connecter maintenant"})})]}):e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"password",className:"text-white/80",children:"Nouveau mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-white/40"}),e.jsx(p,{id:"password",type:i?"text":"password",placeholder:"Min. 8 caractères",value:s.password,onChange:t=>b({...s,password:t.target.value}),className:"pl-10 pr-10 bg-white/5 border-white/10 text-white placeholder:text-white/30 focus:border-amber-500/50",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/40 hover:text-white/60",children:i?e.jsx(R,{className:"h-5 w-5"}):e.jsx(D,{className:"h-5 w-5"})})]}),e.jsx("p",{className:"text-white/40 text-xs",children:"Au moins 8 caractères avec 1 chiffre et 1 lettre"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"confirmPassword",className:"text-white/80",children:"Confirmer le mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-white/40"}),e.jsx(p,{id:"confirmPassword",type:i?"text":"password",placeholder:"Confirmez votre mot de passe",value:s.confirmPassword,onChange:t=>b({...s,confirmPassword:t.target.value}),className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-white/30 focus:border-amber-500/50",required:!0})]})]}),e.jsx(d,{type:"submit",disabled:n,className:"w-full h-12 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white shadow-lg shadow-amber-500/30",children:n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-5 w-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Modification..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Modifier le mot de passe"]})})]})]})]})})]})}export{G as default};
