import{b as j,r,j as e,C as N}from"./index-_yXYEqcL.js";import{C as z}from"./circle-check-big-BOhRDXR_.js";import{S as w}from"./star-nlKRpWv2.js";function E(){const[,i]=j(),o=new URLSearchParams(window.location.search).get("token"),[t,b]=r.useState(0),[u,c]=r.useState(0),[a,h]=r.useState(""),[l,d]=r.useState(!1),[p,f]=r.useState(!1),[m,n]=r.useState("");if(!o)return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-8 max-w-md w-full text-center border border-zinc-800",children:[e.jsx(N,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:"Lien invalide"}),e.jsx("p",{className:"text-zinc-400 mb-6",children:"Ce lien d'avis n'est pas valide. Vérifiez le lien reçu par SMS ou email."}),e.jsx("button",{onClick:()=>i("/"),className:"px-6 py-2 bg-amber-500 text-black font-semibold rounded-lg hover:bg-amber-400 transition",children:"Retour à l'accueil"})]})});if(p)return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-8 max-w-md w-full text-center border border-zinc-800",children:[e.jsx(z,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Merci pour votre avis !"}),e.jsx("p",{className:"text-zinc-400 mb-6",children:"Votre avis sera publié après modération. Merci de votre confiance !"}),e.jsx("button",{onClick:()=>i("/"),className:"px-6 py-2 bg-amber-500 text-black font-semibold rounded-lg hover:bg-amber-400 transition",children:"Retour à l'accueil"})]})});const v=async s=>{if(s.preventDefault(),t===0){n("Veuillez sélectionner une note");return}d(!0),n("");try{const x=await fetch(`/api/reviews?token=${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:t,comment:a})}),g=await x.json();if(!x.ok){n(g.error||"Une erreur est survenue");return}f(!0)}catch{n("Erreur de connexion. Veuillez réessayer.")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-8 max-w-md w-full border border-zinc-800",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Votre avis compte !"}),e.jsx("p",{className:"text-zinc-400",children:"Comment s'est passée votre prestation chez Fat's Hair-Afro ?"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-zinc-400 mb-3",children:"Votre note"}),e.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(s=>e.jsx("button",{type:"button",onClick:()=>b(s),onMouseEnter:()=>c(s),onMouseLeave:()=>c(0),className:"transition-transform hover:scale-110",children:e.jsx(w,{className:`w-10 h-10 ${s<=(u||t)?"fill-amber-400 text-amber-400":"text-zinc-600"} transition-colors`})},s))}),t>0&&e.jsxs("p",{className:"text-amber-400 text-sm mt-2",children:[t===5&&"Excellent !",t===4&&"Très bien !",t===3&&"Bien",t===2&&"Moyen",t===1&&"Décevant"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-2",children:"Votre commentaire (optionnel)"}),e.jsx("textarea",{value:a,onChange:s=>h(s.target.value),rows:4,maxLength:500,placeholder:"Partagez votre expérience...",className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg p-3 text-white placeholder-zinc-500 focus:border-amber-500 focus:outline-none resize-none"}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-1 text-right",children:[a.length,"/500"]})]}),m&&e.jsx("div",{className:"bg-red-900/30 border border-red-800 rounded-lg p-3 text-red-400 text-sm",children:m}),e.jsx("button",{type:"submit",disabled:l||t===0,className:"w-full py-3 bg-amber-500 text-black font-bold rounded-lg hover:bg-amber-400 disabled:opacity-50 disabled:cursor-not-allowed transition",children:l?"Envoi en cours...":"Envoyer mon avis"})]})]})})}export{E as default};
